<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sidebar</title>
    <link rel="stylesheet" href="/css/styles.css">
    <link rel="stylesheet" href="/css/table.css">
    <script src="/js/script.js" defer></script>
    <link href='https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css' rel='stylesheet'>
</head>

<body>
    <div class="sidebar">
        <div class="logo-details">
            <div class="logo_name">constGenius</div>
            <i class='bx bx-menu' id="btn"></i>
        </div>
        <ul class="nav-list">
            <li>
                <i class='bx bx-search'></i>
                <input type="text" placeholder="Search...">
                <span class="tooltip">Search</span>
            </li>
            <li>
                <a href="">
                    <i class='bx bx-grid-alt'></i>
                    <span class="links_name">Dashboard</span>
                </a>
                <span class="tooltip">Dashboard</span>
            </li>
            <li>
                <a href="">
                    <i class='bx bx-user'></i>
                    <span class="links_name">User</span>
                </a>
                <span class="tooltip">User</span>
            </li>
            <li>
                <a href="javascript:void(0)" onclick="loadStoreContent()">
                    <i class='bx bx-chat'></i>
                    <span class="links_name">Store</span>
                </a>
                <span class="tooltip">Store</span>
            </li>
            <li>
                <a href="">
                    <i class='bx bx-pie-chart-alt-2'></i>
                    <span class="links_name">Store-profile</span>
                </a>
                <span class="tooltip">Store profile</span>
            </li>
            <li>
                <a href="">
                    <i class='bx bx-folder'></i>
                    <span class="links_name">Rental</span>
                </a>
                <span class="tooltip">Rental</span>
            </li>
            <li>
                <a href="">
                    <i class='bx bx-cart-alt'></i>
                    <span class="links_name">History</span>
                </a>
                <span class="tooltip">History</span>
            </li>
            <li class="profile">
                <div class="profile-details">
                    <img src="./images/profile.png" alt="profileImg">
                    <div class="name_job">
                        <div class="name">const Genius</div>
                        <div class="job">Web Developer</div>
                    </div>
                </div>
                <i class='bx bx-log-out' id="log_out"></i>
            </li>
        </ul>
    </div>
    <section class="home-section" id="home-section">
        <div class="text">Dashboard</div>
    </section>

    <script>
        function loadStoreContent() {
            fetch('/store/details')  
                .then(response => response.json())
                .then(data => {
                    const section = document.getElementById('home-section');
                    section.innerHTML = `
                        <h2>Store Details</h2>
                        <h3>Films</h3>
                        ${generateTable(data.films)}
                        <h3>Customers</h3>
                        ${generateTable(data.customers)}
                        <h3>Staff</h3>
                        ${generateTable(data.staff)}
                    `;
                });
        }

        function generateTable(data) {
            if (!data || data.length === 0) {
                return "<p>No data available</p>";
            }
            const headers = Object.keys(data[0]);
            const rows = data.map(item => {
                return `<tr>${headers.map(header => `<td>${item[header]}</td>`).join('')}</tr>`;
            }).join('');
            return `
                <table class="table">
                    <thead>
                        <tr>${headers.map(header => `<th>${header}</th>`).join('')}</tr>
                    </thead>
                    <tbody>${rows}</tbody>
                </table>
            `;
        }
    </script>
</body>

</html>